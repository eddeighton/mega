//  Copyright (c) Deighton Systems Limited. 2022. All Rights Reserved.
//  Author: Edward Deighton
//  License: Please see license.txt in the project root folder.

//  Use and copying of this software and preparation of derivative works
//  based upon this software are permitted. Any copy of this software or
//  of any derivative work must include the above copyright notice, this
//  paragraph and the one after it.  Any distribution of this software or
//  derivative works must comply with all applicable laws.

//  This software is made available AS IS, and COPYRIGHT OWNERS DISCLAIMS
//  ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION THE
//  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
//  PURPOSE, AND NOTWITHSTANDING ANY OTHER PROVISION CONTAINED HEREIN, ANY
//  LIABILITY FOR DAMAGES RESULTING FROM THE SOFTWARE OR ITS USE IS
//  EXPRESSLY DISCLAIMED, WHETHER ARISING IN CONTRACT, TORT (INCLUDING
//  NEGLIGENCE) OR STRICT LIABILITY, EVEN IF COPYRIGHT OWNERS ARE ADVISED
//  OF THE POSSIBILITY OF SUCH DAMAGES.



{% for operation in operations %}

{% if operation.has_namespaces %} 
{% for namespace in operation.namespaces %}{% if loop.is_first%}namespace {%else%}::{% endif %}{{namespace}}{% endfor %}
{ 
{% endif %}
{{ operation.return_type }} {% for type in operation.types %}{{type}}::{% endfor %}operator()({{ operation.params_string }}) const
{
    {{ operation.body }}
}
{% if operation.has_namespaces %} 
} 
{% endif %}

extern "C"
{
{{ operation.return_type }} _mw{{ operation.typeID }}( mega::reference _ref{% for param in operation.params %}, {{param.type}} {{param.name}}{% endfor %} )
{
    {% for namespace in operation.namespaces %}::{{namespace}}{% endfor %}{% for type in operation.types %}::{{type}}{% endfor %}
    ref( _ref );
{% if operation.return_type != "void" %}
    return 
{% endif %}
    ref( {% for param in operation.params %}{{param.name}}{% if not loop.is_last%}, {% endif %}{% endfor %} );
}
}
BOOST_DLL_ALIAS_SECTIONED( _mw{{ operation.typeID }}, _ma{{ operation.typeID }}, mega )

{% endfor %}
