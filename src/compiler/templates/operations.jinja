//  Copyright (c) Deighton Systems Limited. 2022. All Rights Reserved.
{% for operation in operations %}

{% if operation.has_namespaces %} 
{% for namespace in operation.namespaces %}{% if loop.is_first%}namespace {%else%}::{% endif %}{{namespace}}{% endfor %}
{ 
{% endif %}
{{ operation.return_type }} {% for type in operation.types %}{{type}}::{% endfor %}operator()({{ operation.params_string }}) const
{
//_MEGAOPERATIONBEGIN{{ operation.typeID }}
{% if operation.automata %}
    switch( _blockID )
    {
{% for block in operation.blocks %}
        case {{ block.id }}:
        //_MEGABEGIN{{block.id}}
        {
            {{ block.body }}
        }
        //_MEGAEND{{block.id}}
        break;
{% endfor %}
    }
    co_return mega::done();
{% else %}
    {{ operation.body }}
{% endif %}
//_MEGAOPERATIONEND{{ operation.typeID }}
}
{% if operation.has_namespaces %} 
} 
{% endif %}

{% endfor %}
